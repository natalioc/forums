<div class="box">
  <div class="left">
<!--user info-->
    <div class="user">

      <div class="username">{{user.username}}</div>
      <div class="bio">{{user.biography}}</div>
    </div>
<!--user's posts-->
    <div class="post-box">
      <a *ngFor="let post of posts" class="post">
        <button *ngIf="this.userOwnsPost" routerLink="/edit-post/{{post._id}}" class="edit-button" type="button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg></button>

        <div class="shell">
          <div class="post-stats">
            <!--like button/count-->
                <app-like-button [post]="post"></app-like-button>
            <!--comment button/count-->
                    <button class="comment-button" type="button" routerLink="/comment/{{post._id}}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                    </svg></button>
                    <p class="comment-count">{{post.commentCount}}</p>
                  </div>
        </div>

          <a class="post-title" routerLink="/post/{{post._id}}">{{post.title}}</a>

        <div class="post-center">
          <div class="post-stats">

          </div>
    <!--post content-->
          <div class="post-content">
            <p>{{post.content | shorten: 580}}</p>
          </div>
        </div>
    <!--user/date-->
        <div class="post-info">
          <div class="post-date">Today</div>
        </div>
      </a>
    </div>
  </div>
  <div class="right">
<!--user's comments-->
  <div class="stats">
    <div class="header">User Info</div>

        <p>Username: {{user.username}}</p>
        <p>Admin: {{user.isAdmin}}</p>
        <p>Biography: {{user.biography}}</p>
        <div *ngIf="user._id == this.id">
          <button onClick="getElementById('bio-modal').style.display = 'block'">Edit Biography</button>
        </div>

    <div *ngFor="let stats of userStats[1]">
      <div *ngIf="stats.numberOfPosts == [] ">
        <p>#p {{stats.numberOfPosts}}</p>
        <p>#c {{stats.numberOfComments}}</p>
        <p>#l {{stats.numberOfLikes}}</p>
      </div>
    </div>
  </div>
    <div class="comment">
      <h2 class="comment-title">Comments</h2>
      <div *ngFor="let comment of userComments">
        <a *ngFor="let post of posts">
          <a *ngIf="comment.postID == post._id">
            <a class="post-title" routerLink="/post/{{post._id}}">{{post.title}}</a>
            <div class="post-comment">{{comment.content}}</div>
          </a>
        </a>
      </div>
    </div>
<!--all featured posts-->
    <div class="featured">
      <app-feature></app-feature>
    </div>
  </div>
</div>

<script>
  //close popup when user clicks outside of window - FIX
  var bioModal = document.getElementById('bio-modal');
  window.addEventListener("click", function(event) {
    if (event.target == bioModal) {
      bioModal.style.display = "none";
    }
  });
</script>
